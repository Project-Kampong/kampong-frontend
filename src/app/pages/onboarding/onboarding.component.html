<section class="container block-content">
  <div class="col-12 onboarding-header">
    <h1>Let's Get Started!</h1>
    <p>Welcome to Kampong! Help us get to know you better by completing your profile setup.</p>
  </div>

  <div class="col-lg-12 mt-5">
    <mat-horizontal-stepper #stepper>
      <mat-step>
        <div class="steps-form-container">
          <form [formGroup]="editProfileForm" class="form-group">
            <ng-template matStepLabel>Customise Profile</ng-template>
            <label>Profile Image</label>
            <div class="custom-input">
              <div class="profile-image">
                <label for="file-upload">
                  <img src="{{ profileData.profile_picture }}" />
                </label>
              </div>
              <input type="file" accept="image/*" id="file-upload" (change)="uploadFile($event)" />
            </div>

            <mat-form-field class="full-width">
              <mat-label>Username</mat-label>
              <input matInput formControlName="nickname" required />
              <!-- Errors Validation -->
              <mat-error *ngIf="editProfileForm.get('nickname').hasError('required')"> Username is required (shifted to registration) </mat-error>
              <mat-error *ngIf="editProfileForm.get('nickname').hasError('maxlength')">
                Username must not be more than 15 characters long.
              </mat-error>
              <mat-error *ngIf="editProfileForm.get('nickname').hasError('pattern')"> Special characters not allowed </mat-error>
              <!-- End of Errors Validation -->
            </mat-form-field>
            <mat-form-field class="half-width">
              <mat-label>Date of Birth</mat-label>
              <input matInput [readonly]="true" [matDatepicker]="DateOfBirthPicker" formControlName="dob" required />
              <mat-datepicker-toggle matSuffix [for]="DateOfBirthPicker"></mat-datepicker-toggle>
              <mat-datepicker #DateOfBirthPicker></mat-datepicker>
              <!-- Errors Validation -->
              <mat-error *ngIf="editProfileForm.get('dob').hasError('required')"> Date Of Birth is required </mat-error>
              <!-- End of Errors Validation -->
            </mat-form-field>
            <div class="steps-btn">
              <button [disabled]="checkPageOneErrors()" mat-button matStepperNext>Next</button>
            </div>
          </form>
        </div>
      </mat-step>
      <mat-step label="Occupation">
        <div class="steps-form-container">
          <form [formGroup]="editProfileForm" class="form-group">
            <mat-form-field class="full-width">
              <mat-label>Occupation</mat-label>
              <input matInput formControlName="occupation" required />
              <!-- Errors Validation -->
              <mat-error *ngIf="editProfileForm.get('occupation').hasError('required')"> Occupation is required </mat-error>
              <mat-error *ngIf="editProfileForm.get('occupation').hasError('maxlength')">
                Occupation must not be more than 30 characters long.
              </mat-error>
              <mat-error *ngIf="editProfileForm.get('occupation').hasError('pattern')"> Special characters not allowed </mat-error>
              <!-- End of Errors Validation -->
            </mat-form-field>
            <div class="steps-btn stepperPrev">
              <button mat-button matStepperPrevious>Back</button>
              <button [disabled]="checkPageTwoErrors()" mat-button matStepperNext>Next</button>
            </div>
          </form>
        </div>
      </mat-step>
      <mat-step label="Tell us more about yourself">
        <div class="steps-form-container">
          <form [formGroup]="editProfileForm" class="form-group">
            <mat-form-field class="full-width text-field">
              <mat-label>About Me</mat-label>
              <textarea matInput required cdkTextareaAutosize cdkAutosizeMinRows="3" formControlName="about"></textarea>
              <!-- Errors Validation -->
              <mat-error *ngIf="editProfileForm.get('about').hasError('required')"> About Me is required </mat-error>
              <mat-error *ngIf="editProfileForm.get('about').hasError('maxlength')"> About Me must not be more than 1000 characters long. </mat-error>
              <mat-error *ngIf="editProfileForm.get('about').hasError('pattern')"> Special characters not allowed </mat-error>
              <!-- End of Errors Validation -->
            </mat-form-field>
            <div class="steps-btn stepperPrev">
              <button mat-button matStepperPrevious>Back</button>
              <button [disabled]="getFormValidationErrors()" class="stepper-complete" (click)="saveProfile()" mat-button matStepperNext>
                Complete
              </button>
            </div>
          </form>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </div>
</section>
