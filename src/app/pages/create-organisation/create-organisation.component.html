<section class="container block-content">
  <div class="listing-creation">
    <div class="listing-section">
      <div class="listing-stepper">
        <span> 1 </span>
        <p>Organisation Information</p>
      </div>
      <div class="listing-form" [formGroup]="organisationForm">
        <div class="form-item">
          <label>Name Of Organisation *</label>
          <input
            placeholder="Give your organisation a name"
            formControlName="name"
          />
          <div class="hint">{{ organisationForm.value.name.length }} / 50</div>

          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="organisationForm.get('name').hasError('maxlength')"
          >
            Name must not be more than 50 characters long.
          </span>
          <span
            class="error-hint"
            *ngIf="organisationForm.get('name').hasError('pattern')"
          >
            Special characters not allowed
          </span>
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('name').hasError('required') &&
              organisationForm.controls['name']?.touched
            "
          >
            Name is required
          </span>
          <!-- End of Errors Validation -->
        </div>

        <div class="form-item d-flex">
          <mat-form-field appearance="fill">
            <mat-label>Type</mat-label>
            <mat-select required formControlName="organisation_type">
              <mat-optgroup
                *ngFor="let group of typeGroup"
                [label]="group.name"
                [disabled]="group.disabled"
              >
                <mat-option *ngFor="let type of group.group" [value]="type">
                  {{ type }}
                </mat-option>
              </mat-optgroup>
            </mat-select>
          </mat-form-field>

          <div
            *ngIf="organisationForm.value.organisation_type == 'Create a Type'"
            class="half-width px-3"
          >
            <label>Create a Type</label>
            <input
              matInput
              formControlName="customType"
              placeholder="Enter your organisation type"
            />
            <!-- Errors Validation -->
            <span
              class="error-hint"
              *ngIf="organisationForm.get('customType').hasError('maxlength')"
            >
              Type must not be more than 25 characters long.
            </span>
            <!-- End of Errors Validation -->
          </div>
        </div>

        <div class="form-item">
          <label>Contact Email *</label>
          <input
            placeholder="Give your organisation an email"
            formControlName="email"
          />
          <div class="hint">
            {{ organisationForm.value.email.length }} / 320
          </div>

          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('email').hasError('required') &&
              organisationForm.controls['email']?.touched
            "
          >
            Email is required
          </span>
          <span
            class="error-hint"
            *ngIf="organisationForm.get('email').hasError('email')"
          >
            Please Enter a Valid Email
          </span>
        </div>

        <div class="form-item">
          <label>Contact Number *</label>
          <input
            placeholder="Enter a contact number for your organisation"
            formControlName="handphone"
          />
          <div class="hint">
            {{ organisationForm.value.handphone.length }} / 20
          </div>

          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="organisationForm.get('handphone').hasError('max')"
          >
            Contact Number is too long
          </span>
          <span
            class="error-hint"
            *ngIf="organisationForm.get('handphone').hasError('pattern')"
          >
            Special characters not allowed
          </span>
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('handphone').hasError('required') &&
              organisationForm.controls['handphone']?.touched
            "
          >
            Contact Number is required
          </span>
          <!-- End of Errors Validation -->
        </div>

        <div class="form-item">
          <label>Website URL *</label>
          <input
            placeholder="Enter a website URL for your organisation"
            formControlName="website_url"
          />
          <div class="hint">
            {{ organisationForm.value.website_url.length }} / 100
          </div>

          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="organisationForm.get('website_url').hasError('max')"
          >
            Website URL must not be more than 100 characters long.
          </span>
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('website_url').hasError('required') &&
              organisationForm.controls['website_url']?.touched
            "
          >
            Website URL is required
          </span>
          <!-- End of Errors Validation -->
        </div>

        <div class="listing-stepper">
          <p>Location</p>
        </div>

        <div class="form-item">
          <div [formGroup]="organisationForm">
            <mat-form-field appearance="fill">
              <mat-label>Area *</mat-label>
              <mat-select formControlName="locations" multiple>
                <mat-optgroup
                  *ngFor="let group of locationGroup"
                  [label]="group.name"
                  [disabled]="group.disabled"
                >
                <mat-option *ngFor="let location of group.group" [value]="location">
                  {{ location }}
                </mat-option>
              </mat-optgroup>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="form-item">
          <label>Address *</label>
          <input
            placeholder="Enter the address for your organisation"
            formControlName="address"
          />

          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('address').hasError('required') &&
              organisationForm.controls['address']?.touched
            "
          >
            Address is required
          </span>
          <!-- End of Errors Validation -->
        </div>

      </div>
    </div>
    <div class="listing-section">
      <div class="listing-stepper">
        <span> 2 </span>
        <p>Tell us more about your Organisation</p>
      </div>
      <div class="listing-form" [formGroup]="organisationForm">
        <div class="form-item">
          <label>About *</label>
          <textarea
            cdkTextareaAutosize
            cdkAutosizeMinRows="5"
            placeholder="Write a short intro about your organisation here!"
            formControlName="about"
          >
          </textarea>
          <span class="hint">
            {{ organisationForm.value.about.length }} / 500
          </span>
          <!-- Errors Validation -->
          <span
            class="error-hint"
            *ngIf="
              organisationForm.get('about').hasError('required') &&
              organisationForm.controls['about']?.touched
            "
          >
            About is required
          </span>
          <span
            class="error-hint"
            *ngIf="organisationForm.get('about').hasError('maxlength')"
          >
            About Statement must not be more than 500 characters long.
          </span>
          <!-- End of Errors Validation -->
        </div>

        <div class="form-item">
          <label>Story *</label>
          <div class="CMS-editor editing-active">
            <div class="action-container">
              <ul>
                <li>
                  <button
                    type="button"
                    data-command="justifyLeft"
                    class="action-btn"
                  >
                    <i class="fas fa-align-left"></i>
                  </button>
                </li>
                <li>
                  <button
                    type="button"
                    data-command="justifyCenter"
                    class="action-btn"
                  >
                    <i class="fas fa-align-center"></i>
                  </button>
                </li>
                <li>
                  <button
                    type="button"
                    data-command="justifyRight"
                    class="action-btn"
                  >
                    <i class="fas fa-align-right"></i>
                  </button>
                </li>

                <li>
                  <button type="button" data-command="bold" class="action-btn">
                    <i class="fas fa-bold"></i>
                  </button>
                </li>
                <li>
                  <button
                    type="button"
                    data-command="underline"
                    class="action-btn"
                  >
                    <i class="fas fa-underline"></i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="insertOrderedList"
                    class="action-btn"
                  >
                    <i class="fas fa-list-ol"></i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="insertUnorderedList"
                    class="action-btn"
                  >
                    <i class="fas fa-list-ul"></i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="createlink"
                    class="action-btn"
                  >
                    <i class="fas fa-link"></i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="formatBlock"
                    data-size="H1"
                    class="action-btn"
                  >
                    <i>H1</i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="formatBlock"
                    data-size="H2"
                    class="action-btn"
                  >
                    <i>H2</i>
                  </button>
                </li>

                <li>
                  <button
                    type="button"
                    data-command="formatBlock"
                    data-size="H3"
                    class="action-btn"
                  >
                    <i>H3</i>
                  </button>
                </li>
              </ul>
            </div>
            <div contenteditable="true" id="output">
              <b
                >Write about the story behind your organisation! This text block is editable.</b
              >
              <div>
                <b><br /></b>
              </div>
              <div>
                <ol>
                  <li>item 1</li>
                  <li>item 2</li>
                </ol>
                <div><br /></div>
              </div>
              <div>
                <ul>
                  <li>bullet 1</li>
                  <li>bullet 2</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="listing-section">
      <div class="listing-stepper">
        <span> 3 </span>
        <p>Upload Photos</p>
      </div>
      <div class="form-item">
        <div class="custom-input col-lg-12">
          <label>Upload your header photo here!</label>
          <div class="d-flex flex-wrap align-items-start mt-2 image-output">
            <div
              *ngIf="headerPhoto !== null"
              class="image-container"
              (click)="removeHeaderPhoto()"
            >
              <img src="{{headerPhotoDisplay}}" />
            </div>
            <div
              *ngIf="headerPhoto === null"
              class="custom-file-upload-container"
            >
              <label for="header-upload" class="custom-file-upload"> </label>
              <input
                type="file"
                accept="image/*"
                id="header-upload"
                (change)="uploadHeaderPhoto($event)"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="form-item">
        <div class="custom-input col-lg-12">
          <label>Upload your display photo here!</label>
          <div class="d-flex flex-wrap align-items-start mt-2 image-output">
            <div
              *ngIf="displayPhoto !== null"
              class="image-container"
              (click)="removeDisplayPhoto()"
            >
              <img src="{{displayPhotoDisplay}}" />
            </div>
            <div
              *ngIf="displayPhoto === null"
              class="custom-file-upload-container"
            >
              <label for="display-upload" class="custom-file-upload"> </label>
              <input
                type="file"
                accept="image/*"
                id="display-upload"
                (change)="uploadDisplayPhoto($event)"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="form-item">
        <div class="custom-input col-lg-12">
          <label>Upload images of your organisation here* (Maximum of 5)</label>
          <div class="d-flex flex-wrap align-items-start mt-2 image-output">
            <div
              *ngFor="let img of additionalPhotosDisplay; index as i"
              class="image-container"
              (click)="removeAdditionalPhoto(i)"
            >
              <img src="{{ img }}" />
            </div>

            <div
              *ngIf="additionalPhotosDisplay.length < 5 && additionalPhotos.length < 5"
              class="custom-file-upload-container"
            >
              <label for="additional-upload" class="custom-file-upload"> </label>
              <input
                type="file"
                accept="image/*"
                id="additional-upload"
                (change)="uploadAdditionalPhoto($event)"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section>
  <!-- Submit -->
  <div class="listing-section floating-actions-container">
    <div class="floating-actions">
      <div class="container">
        <div class="submit-btn">
          <button class="btn yellow-btn" (click)="createOrganisation()">
            Create Organisation
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
